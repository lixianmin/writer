C\#使用扩展方法实现mixin，这点毋庸置疑，但对如何在项目中推广mixin这件事，一直一来并没有找到合适的切入点。昨天突发奇想，终于找到一种合适的方案，我暂且称之为I have mixin模式。也许别人知道但我不知道，也许我接下来要讲的方案在业界已有定论，只是我孤陋寡闻没听

过，也许有更好的方案-- 无论哪种情况，请您告诉我。

该模式涉及到四个概念，分别是：宿主类，属性类，接口类和扩展类。在常规设计方案中，我们只会使用前两种概念（宿主类和属性类）。

举个栗子，我们现在已经有一个wallet类负责处理money相关的管理，如果要新建一个person类需要进行money相关的操作的话，它可能需要组合一个wallet属性。常规的设计方案可能是如下样子，其中person是宿主类，wallet是属性类：

而使用I have mixin模式的写法是如下样子：

注意，宿主类person中只编码了一个接口方法getwallet，就自动拥有了ihavawalletex扩展类中的所有方法。只要wallet类足够通用，这个方案就是很便宜的。比如，拥有wallet属性的可能不止是person类，也许mobile类也需要。

再举个例子：unity中有一个广泛应用的类名为tranform，它实现了很多3d坐标相关的操作。我们可以定义一个接口类ihavetransform和一个扩展类ihavetransformex，从此以后，只要实现了ihavetransfoem接口的类都将因此收益

你可能已经注意到我在对扩展方法命名时都使用了以ex结尾方式，目的是为了让程序员明确的知道自己调用是扩展方法而不是成员，这在很多情况下是有益的。比如对ihavetransformex中的setpositionex方法，宿主类可能需要定义一个同名方法setposition\(\)（注意没有ex）用于处理一些特殊情况。如果扩展类中的方法也定义为setposition的话，两个方法的区分度就很低了，程序员使用时很容易混淆。

后来我想了一下，System.Linq.Enumerable就是这样实现mixin的，我一直知道这件事情，但竟然没有重视起来。

