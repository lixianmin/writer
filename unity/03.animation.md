

#### 1 Basics



#### 2 AnimationClip片段

1. 外部导入, 或在unity3d中制作
2. **cmd+6**: 打开animation窗口录制动画, 新建动画会得到anim, controller, animator这一个完整的资源
3.  unity3d中的很多资源文件都是yaml文件, 含: unity, prefab, anim, controller等
4. .anim文件中的每一个curve字段中会**存储path信息**, 如果path匹配不上则无法控制对应的骨骼



##### 02 Import Settings

1. Loop Time: 勾选后, 意味着会循环播放



#### 3 Animator组件

1. **Controller**: 挂载动画状态机(AnimatorController)
2. Avatar: 挂载动画替身
3. Apply Root Motion: 使用动画位移, 而不是script控制位移
4. Update Mode:
   1. Normal: 与Update帧率同步
   2. Animate Phsics: 与Fixed Update帧率同步, 适合实时交互的act类游戏
   3. Unscaled Time: 忽略timeScale设置, 动画不会随timeScale设置变快或变慢
5. Culing Mode:
   1. Always Animate: 在camera看不见时也不剔除
   2. Cull Update Transform: 在camera看不见时剔除IK
   3. Cull Completely: 在camera看不见时停止动画
6. 



#### 4 AnimatorController

1. 双击controller文件打开Animator窗口
2. Layers: 动画合成
3. Parameters: 添加状态参数, 用于控制状态机变换
4. 状态机视图:
   1. 绿色Entry, 黄色初始态, 红色Exit
   2. 



#### 5 [Avatar替身](https://www.bilibili.com/video/BV1GL4y1B7s1)

1. **替(复用)身(人形)**: 人形动画的骨骼标准, 用于复用动画
2. 把模型的**骨骼信息**以及与unity标准肌肉之间的**mapping信息**存储在avatar文件中, 这时就不再需要模型上的骨骼信息了
3. AnimationClip需要严格匹配path才能播放动画, 但avatar自动寻找当前节点与子节点的, **层层寻找符合要求的模型并播放动画**
4. 找到模型的fbx文件, 在inspector→Rig
   1. AnimationType→Humanoid
   2. Avatar Definition: 如何创建肌肉mapping关系
      1. Configure: 配置avatar细节
   3. Skin Weights: 一个skin节点受几个bones影响
   4. Optimize Game Objects: 建议选中, 使用avatar之后模型身上的骨骼信息已经无用了, 可以通过该选项删除掉, 可节约存储



#### 6 IK

1. IK Gobal: 
2. IK Hint: 
3. 在AnimatorController的设置中勾选IK Pass后, OnAnimatorIK()回调才会生效