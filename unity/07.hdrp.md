



#### 1 Settings





#### 2 Lighting

1. 未来一定是ray tracing (Nvidia RTX显卡), 那时就不需要bake了
2. 
3. 



##### 01 Progressive Lightmapper

1. 2019.4中正式引入Progressive Lightmapper(渐进式光照贴图烘焙), 并弃用enlighten技术
2. 烘焙要求: 
   1. 第二套uv相互间距足够 (防渗色, 而且有足够间距就意味不能重叠啦)
   2. 标记为static的物体是静态物体, 其它就是动态物体了
3. light probes与light map
   1. 都是烘焙出来的
   2. light probes主用于动态物体, 性能差一些
   3. light map只用于静态物体, 性能好一些



|                | Builtin | URP  | HDRP | Notes                                                 |
| -------------- | ------- | ---- | ---- | ----------------------------------------------------- |
| Baked Indirect | ✓       | ✓    | ✓    | 1. 中高端平台: PC, 主机                               |
| Shadowmask     | ✓       | ✓    | ✓    | 1. 烘焙了shadow信息, 因此运行时性能好于Baked Indirect |
| Subtractive    | ✓       | ✓    | X    | 1. 性能差的平台: mobile                               |



1. 实时光: 除了subtractive模式的static物体使用light map, 其它都是接受实时光
2. **间接光: dynamic物体靠light probes, static物体靠light map**, 用于增加场景真实性
3. **动态阴影: shadow map (实时计算)**
4. 静态阴影: 可以选择用shadow map, 或烘焙到light probes (dynamic)或light map (static)
5. **阴影质量: shadow map (动态阴影, dynamic静态阴影) > light probes(dynamic静态阴影) > light map (static静态阴影)**



**动态物体:** shadow map 6个, light probes 6个

|                     | 实时光 | 间接光(GI)   | 动态阴影   | 静态阴影     |
| ------------------- | ------ | ------------ | ---------- | ------------ |
| Baked Indirect      | 接受   | light probes | shadow map | shadow map   |
| Distance Shadowmask | 接受   | light probes | shadow map | shadow map   |
| Shadowmask          | 接受   | light probes | shadow map | light probes |
| Subtractive         | 接受   | light probes | shadow map | light probes |



**静态物体:** shadow map 6个, light map 6个 

|                     | 实时光    | 间接光(GI) | 动态阴影   | 静态阴影   |
| ------------------- | --------- | ---------- | ---------- | ---------- |
| Baked Indirect      | 接受      | light map  | shadow map | shadow map |
| Distance Shadowmask | 接受      | light map  | shadow map | shadow map |
| Shadowmask          | 接受      | light map  | shadow map | light map  |
| Subtractive         | light map | light map  | shadow map | light map  |



**原始表:**

|                     | 动态物体                                                     | 静态物体                                                     |
| ------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| Baked Indirect      | 1. 接受实时光照信息<br />2. 通过Light Probes, 接受烘焙的间接光<br />3. 接受动态物体的实时阴影(在shadow distance范围内, 通过shadow map方式)<br />4. 接受静态物体的实时阴影(在shadow distance范围内, 通过shadow map方式) | 1. 接受实时光照信息<br />2. 通过light map,  接受烘培的间接光照<br />3. 接受动态物体的实时阴影(在shadow distance范围内, 通过shadow map方式)<br />4. 接受静态物体的实时阴影(在shadow distance范围内, 通过shadow map方式) |
| Distance Shadowmask | 1. 接受实时光照信息<br />2. 通过Light Probes, 接受烘焙的间接光<br />3. 接受动态物体的实时阴影(在shadow distance范围内, 通过shadow map方式)<br />4. 接受静态物体的实时阴影(在shadow distance范围内, 通过shadow map方式)<br />5. 超过shadow distance范围后, 通过light probes获取静态物体的烘焙阴影 | 1. 接受实时光照信息<br />2. 通过light map,  接受烘培的间接光照<br />3. 接受动态物体的实时阴影(在shadow distance范围内, 通过shadow map方式)<br />4. 接受静态物体的实时阴影(在shadow distance范围内, 通过shadow map方式)<br />5. 超过shadow distance范围后, 通过lightmap获取静态物体的烘焙阴影 |
| Shadowmask          | 1. 接受实时光照信息<br />2. 通过Light Probes, 接受烘焙的间接光<br />3. 接受动态物体的实时阴影(在shadow distance范围内, 通过shadow map方式)<br />4. 通过light probes, 接受静态物体的烘焙阴影(不受shadow distance影响) | 1. 接受实时光照信息<br />2. 通过light map,  接受烘培的间接光照<br />3. 接受动态物体的实时阴影(在shadow distance范围内, 通过shadow map方式)<br />4. 通过light map, 接受静态物体的烘焙阴影(不受shadow distance影响) |
| Subtractive         | 1. 接受实时光照信息<br />2. 通过Light Probes, 接受间接光照信息<br />3. 通过Light Probes, 接受静态物体的烘焙阴影<br />4. 接受主平行光(directional light)动态物体的实时阴影(在shadow distance范围内, 通过shadow map方式) | 1. 通过light map, 接受烘焙的实时光照信息<br />2. 通过light map, 接受烘焙的间接光照信息<br />3. 通过light map, 接受静态物体的烘焙阴影<br />4. 接受主平行光(directional light)动态物体的实时阴影 (在shadow distance范围内, 通过shadow map方式) |



#### 9 References

1. [Unity渐进式光照贴图烘焙详解(杨栋)](https://zhuanlan.zhihu.com/p/157992819)
2. 