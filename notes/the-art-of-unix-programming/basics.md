---
#### 1.6.10 接口设计避免标新立异
最小惊奇原则
1. 最易用的程序就是最切合用户已有知识的程序
2. 表象相似往往会导致人们产生错误的假定，所以最好让不同的事物有明显的区别，参见从LoadWebGroup()到CreateWebGroup()的改动

---
#### 3.1.2 多任务能力
cooperative mulitasking操作系统，是假定在所有进程都能友好的在合适时间放弃cpu的基础之上，这意味着，简单的编程错误就可以将机器挂起，也因此导致了这种操作系统的消亡。

基础设施代码需要对客户代码拥有极强的容忍度，例如诡异的使用方式（可重入，无副作用），例如容忍程序员忘记某些编程规范（内存回收，StopTask之类）。

---
#### 4.2.1 紧凑性

1. 紧凑性是指一个设计是否能装进人脑的特性。
    * 有经验的用户通常需要操作手册吗？如果不需要，那么这个设计就是紧凑的；
    * 半紧凑型：相对紧凑的功能子集，可以满足80%以上的一般需求；
2. 魔数7： 认知心理学，美国本地电话号码只有7位的原因。


#### 4.2.3 SPOT原则

DRY don't repeat yourself，竟然是源自于正交性要求的特例，在纯粹的正交设计中，任何操作均无副作用，再说一遍，没有副作用是检验正交性设计的明确标准，重构的原则性目标就是提高正交性。比如，假定数据来源于数据流，就比假定数据来源于文件更加具有正交性。

另外，DRY并非单独针对代码，对数据和数据结构有同样的要求。例如，缓存，就是一种纯粹的速度优化方案，确保缓存和主文本一致的代码非常容易产生漏洞和bug，metadata与xml原始数据之间的同步正在承受着这种代价。

#### 4.2.4 紧凑性和强单一中心
形式法 与 试探法
凭经验得出解决方案，这会增生出大量特例和边界情况，随着样本数增加，所有常见问题都会随之而来，因此必须采用某种恢复机制作为后备⋯⋯ 就像现在的XmlMetadata一样

---
#### 5.1文本化的重要性

文本化优势在于通用性，人无需专门的工具就可以读写和编辑文本流。如果你很想设计一个复杂的二进制文件格式，通常，更明智的做法是躺下来静等这种感觉过去。

另外，设计紧凑的二进制格式往往无法兼顾干净扩展的需求，些微的格式变化就会导致读写代码的变化，以及旧有数据的不可读。

使用二进制协议的唯一正当理由是：你需要处理大批量的数据集，因而确实需要关注能否在介质上获得最大位密度（多媒体），或者你非常关心数据集反序列话为内存对象所必需的时间或指令开销（网络协议）(˶‾᷄ ⁻̫ ‾᷅˵)